<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>XPieder — Real-Life Social Network</title>
  <meta name="description" content="XPieder — the world's first Real-Life Social Network. Connect with people around you using spatial AR interactions and presence-based discovery." />
  <style>
    :root{
      --bg-1:#04121a; --bg-2:#071727; --muted:rgba(255,255,255,0.88);
      --nav-h:68px; --footer-h:64px;
    }
    html,body{height:100%;margin:0;padding:0;overflow:hidden;background:linear-gradient(180deg,var(--bg-1),var(--bg-2));font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto,Helvetica,Arial;color:var(--muted)}
    .ambient{position:fixed;inset:0;z-index:0;pointer-events:none;background:radial-gradient(700px 400px at 8% 20%, rgba(124,58,237,0.10), transparent 12%), radial-gradient(700px 400px at 85% 80%, rgba(34,199,255,0.06), transparent 12%);filter:blur(12px);animation:drift 20s linear infinite;}
    @keyframes drift{0%{transform:translate3d(0,0,0)}50%{transform:translate3d(12px,-18px,0)}100%{transform:translate3d(0,0,0)}}
    .nav{position:fixed;left:16px;right:16px;top:14px;height:var(--nav-h);display:flex;align-items:center;justify-content:space-between;padding:8px 20px;background:rgba(255,255,255,0.03);backdrop-filter:blur(8px);border-radius:12px;z-index:10020}
    .nav-left{display:flex;align-items:center;gap:12px}
    .brand-img{width:44px;height:44px;border-radius:10px;object-fit:contain}
    .brand-title{font-weight:800;color:#fff}
    .nav-right{display:flex;gap:12px;align-items:center}
    .cta-btn{padding:9px 12px;border-radius:10px;border:0;background:linear-gradient(90deg,#7c3aed,#22c7ff);color:#fff;font-weight:800;cursor:pointer}

    .frame-wrap{position:fixed;left:12px;right:12px;top:calc(var(--nav-h) + 24px);bottom:calc(var(--footer-h) + 16px);z-index:2;border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,0.03);background:transparent}
    .frame-wrap iframe{width:100% !important;height:100% !important;border:0;display:block;background:transparent}

    .loader{position:fixed;inset:0;z-index:10015;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg, rgba(3,6,10,0.55), rgba(3,6,10,0.4));pointer-events:none;transition:opacity .25s ease}
    .loader.hidden{opacity:0;visibility:hidden}
    .glow-ring{width:72px;height:72px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:radial-gradient(circle at 30% 20%, rgba(34,199,255,0.12), rgba(124,58,237,0.03));animation:breath 1.8s infinite}
    .ring-core{width:48px;height:48px;border-radius:50%;background:conic-gradient(from 0deg,#7c3aed,#22c7ff)}
    @keyframes breath{0%{transform:scale(.96)}50%{transform:scale(1.04)}100%{transform:scale(.96)}}

    footer{position:fixed;left:12px;right:12px;bottom:12px;height:var(--footer-h);z-index:10020;display:flex;align-items:center;justify-content:space-between;padding:0 18px;border-radius:12px;background:rgba(255,255,255,0.02);backdrop-filter:blur(6px);border:1px solid rgba(255,255,255,0.03)}
    .badge{padding:6px 10px;border-radius:8px;background:rgba(255,255,255,0.02)}

    /* Fallback banner when embed fails */
    .fallback-banner{
      position:fixed;left:50%;top:18px;transform:translateX(-50%);z-index:10050;display:none;
      background:linear-gradient(90deg,#212f3d,#0b2430);padding:10px 14px;border-radius:10px;color:#fff;border:1px solid rgba(255,255,255,0.04);box-shadow:0 10px 30px rgba(2,6,12,0.5)
    }
    .fallback-banner.show{display:flex;gap:12px;align-items:center}
    .fallback-btn{padding:8px 12px;border-radius:8px;border:0;background:linear-gradient(90deg,#7c3aed,#22c7ff);color:#fff;font-weight:700;cursor:pointer}

    /* small screens tweaks */
    @media (max-width:820px){ .nav{left:8px;right:8px} .frame-wrap{left:8px;right:8px;top:calc(var(--nav-h) + 14px);bottom:calc(var(--footer-h) + 12px)} }
  </style>
</head>
<body>
  <div class="ambient" aria-hidden="true"></div>

  <header class="nav" role="banner">
    <div class="nav-left">
      <img src="logo.png" alt="XPieder logo" class="brand-img" />
      <div>
        <div class="brand-title">XPieder</div>
        <div style="font-size:12px;color:rgba(255,255,255,0.9);font-weight:600">Real-Life Social Network</div>
      </div>
    </div>
    <div class="nav-right">
      <button class="cta-btn" id="openInvite">Request Invite</button>
    </div>
  </header>

  <div id="fallbackBanner" class="fallback-banner" role="alert">
    <div style="font-weight:700">Having trouble loading XPieder?</div>
    <button id="openInNew" class="fallback-btn">Open in new tab</button>
    <button id="retryEmbed" class="fallback-btn" style="background:transparent;border:1px solid rgba(255,255,255,0.08);margin-left:6px;">Retry embed</button>
  </div>

  <div class="frame-wrap" id="frameWrap">
    <!-- Correct, clean iframe: no fixed sizes -->
    <iframe id="gammaFrame"
      src="https://gamma.app/embed/8chj517oau8li0f"
      allow="fullscreen; geolocation; microphone; camera"
      title="XPieder: World's First Real-Life Social Network"
      onload="onFrameLoad()"></iframe>
  </div>

  <div id="loader" class="loader" role="status" aria-live="polite">
    <div style="text-align:center">
      <div class="glow-ring" aria-hidden="true"><div class="ring-core"></div></div>
      <div style="margin-top:12px;font-weight:700;color:#fff">Loading XPieder — preparing your real-world layer…</div>
    </div>
  </div>

  <footer role="contentinfo">
    <div style="display:flex;gap:12px;align-items:center">
      <div style="font-weight:800;color:#fff">XPieder</div>
      <div class="badge">NVIDIA Inception</div>
    </div>
    <div style="text-align:right">
      Techefect Private Limited<br />
      <span style="font-size:12px;opacity:0.9">H-388, Shernagar, Agomoni, 783335, Dhubri, Assam</span>
    </div>
  </footer>

  <!-- Invite modal (kept lightweight) -->
  <div id="modalBackdrop" style="display:none;position:fixed;inset:0;align-items:center;justify-content:center;background:rgba(0,0,0,0.6);z-index:10040">
    <div style="width:100%;max-width:460px;background:#071523;border-radius:12px;padding:18px;color:#fff;border:1px solid rgba(255,255,255,0.03)">
      <h3 style="margin:0 0 6px 0">Request Early Access</h3>
      <p style="margin:0 0 12px 0;color:rgba(255,255,255,0.86)">Enter your email and we'll notify you when slots open.</p>
      <input id="inviteEmail" type="email" placeholder="you@example.com" style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:#fff" />
      <div style="display:flex;justify-content:flex-end;gap:8px;margin-top:12px">
        <button id="cancelInvite" style="padding:8px 12px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:#fff">Cancel</button>
        <button id="sendInvite" style="padding:8px 12px;border-radius:8px;border:0;background:linear-gradient(90deg,#7c3aed,#22c7ff);color:#fff">Request Invite</button>
      </div>
      <div id="inviteMsg" style="margin-top:10px;color:#9cc;"></div>
    </div>
  </div>

  <script>
    // Public gamma.site (fallback) — use your actual gamma.site public URL here:
    const GAMMA_PUBLIC = "https://xpieder-gaq30kv.gamma.site/"; // fallback open in new tab
    const GAMMA_EMBED = "https://gamma.app/embed/8chj517oau8li0f";

    let iframeLoaded = false;
    const loader = document.getElementById('loader');
    const fallback = document.getElementById('fallbackBanner');
    const frame = document.getElementById('gammaFrame');

    function onFrameLoad(){
      // iframe has fired load — mark success and hide loader
      iframeLoaded = true;
      if(loader) loader.classList.add('hidden');
      // hide fallback if visible
      if(fallback) fallback.classList.remove('show');
    }

    // Fallback detection: if iframe hasn't loaded properly in X seconds, show banner.
    // 1. 3s: if not loaded, show a small unobtrusive fallback banner.
    // 2. 7s: if still not loaded, make banner more prominent (user can open in new tab).
    setTimeout(()=>{ if(!iframeLoaded){ fallback.classList.add('show'); } }, 3000);
    setTimeout(()=>{ if(!iframeLoaded){ fallback.classList.add('show'); /* could push analytics here */ } }, 7000);

    // Buttons
    document.getElementById('openInNew').addEventListener('click', function(){
      window.open(GAMMA_PUBLIC, '_blank', 'noopener');
    });
    document.getElementById('retryEmbed').addEventListener('click', function(){
      // reload iframe cleanly
      try {
        loader.classList.remove('hidden');
        iframeLoaded = false;
        frame.src = GAMMA_EMBED + '?reload=' + Date.now();
      } catch(e) { window.open(GAMMA_PUBLIC, '_blank', 'noopener'); }
    });

    // Invite modal wiring
    document.getElementById('openInvite').addEventListener('click', function(){
      document.getElementById('modalBackdrop').style.display = 'flex';
      document.getElementById('inviteEmail').focus();
    });
    document.getElementById('cancelInvite').addEventListener('click', function(){
      document.getElementById('modalBackdrop').style.display = 'none';
    });
    document.getElementById('sendInvite').addEventListener('click', function(){
      const email = document.getElementById('inviteEmail').value.trim();
      const msg = document.getElementById('inviteMsg');
      if(!email || email.indexOf('@')===-1){ msg.textContent = 'Please enter a valid email.'; return; }
      msg.textContent = 'Sending...';
      // Simulate - replace with real webhook
      setTimeout(()=>{ msg.textContent = 'Thanks — we will be in touch.'; document.getElementById('inviteEmail').value=''; setTimeout(()=>document.getElementById('modalBackdrop').style.display='none',1200); }, 900);
    });

    // Extra: on mobile, if iframe failing repeatedly we will not auto-open but the banner button is visible.
    // If you want an auto-open experience, we can prompt the user, but browsers may block pop-ups.
  </script>
</body>
</html>
